# Phase 4: WordPress Preparation

> üìö **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: [‚Üê Phase 3](phase3_media_processing.md) | [‚Üê –í—Å–µ —Ñ–∞–∑—ã](../README.md#-–ø—è—Ç–∏—Ñ–∞–∑–Ω—ã–π-–ø–∞–π–ø–ª–∞–π–Ω-–æ–±—Ä–∞–±–æ—Ç–∫–∏) | [‚Üí Phase 5](phase5_wordpress_publishing.md)

## –û–±–∑–æ—Ä
–ß–µ—Ç–≤–µ—Ä—Ç–∞—è —Ñ–∞–∑–∞ - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç–∞—Ç–µ–π –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ WordPress: –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –∏ SEO-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è.

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –≠—Ç–∞ —Ñ–∞–∑–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –¥–ª—è —Å—Ç–∞—Ç–µ–π —Å `media_status = 'ready'`, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –≤ Phase 3.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **WordPressPublisher** (`services/wordpress_publisher.py`) - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å
- **DeepSeek Chat API** - –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

### 1. –í—ã–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–µ–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
```sql
SELECT a.article_id, a.title, a.content, a.summary, a.tags, 
       a.categories, a.language, a.url, a.source_id, a.published_date
FROM articles a
LEFT JOIN wordpress_articles w ON a.article_id = w.article_id
WHERE a.content_status = 'parsed' 
  AND a.media_status = 'ready'    -- –ö–õ–Æ–ß–ï–í–û–ï –£–°–õ–û–í–ò–ï!
  AND a.content IS NOT NULL
  AND w.id IS NULL
ORDER BY a.published_date DESC
LIMIT ?
```

**–£—Å–ª–æ–≤–∏–µ `media_status = 'ready'` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:**
- –°—Ç–∞—Ç—å–∏ –±–µ–∑ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å—Ä–∞–∑—É
- –°—Ç–∞—Ç—å–∏ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏ –∂–¥—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Phase 3
- –ò—Å–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –º–µ–¥–∏–∞

### 2. –ü–µ—Ä–µ–≤–æ–¥ –∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ DeepSeek
```python
prompt = f"""
–ü–µ—Ä–µ–≤–µ–¥–∏ –∏ –ø–µ—Ä–µ–ø–∏—à–∏ —ç—Ç—É —Å—Ç–∞—Ç—å—é –æ–± –ò–ò –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. –°–æ—Ö—Ä–∞–Ω–∏ –≤—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–π/–ø—Ä–æ–¥—É–∫—Ç–æ–≤
2. –ê–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ–¥ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é
3. –°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ç–æ—á–Ω–æ—Å—Ç—å
4. –°–¥–µ–ª–∞–π —Ç–µ–∫—Å—Ç –∂–∏–≤—ã–º –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º
5. –î–æ–±–∞–≤—å –∫—Ä–∞—Ç–∫–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≤ –∫–æ–Ω—Ü–µ

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ JSON:
{{
    "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ —Ä—É—Å—Å–∫–æ–º",
    "content": "–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏ —Å HTML —Ä–∞–∑–º–µ—Ç–∫–æ–π",
    "excerpt": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è",
    "focus_keyword": "–∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –¥–ª—è SEO",
    "categories": ["–∫–∞—Ç–µ–≥–æ—Ä–∏—è1", "–∫–∞—Ç–µ–≥–æ—Ä–∏—è2"],
    "tags": ["—Ç–µ–≥1", "—Ç–µ–≥2", "—Ç–µ–≥3"]
}}
"""
```

### 3. SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (Yoast —Ñ–æ—Ä–º–∞—Ç)
```python
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SEO –∑–∞–≥–æ–ª–æ–≤–∫–∞ (max 60 —Å–∏–º–≤–æ–ª–æ–≤)
seo_title = self._generate_seo_title(title, focus_keyword)

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è meta –æ–ø–∏—Å–∞–Ω–∏—è (max 160 —Å–∏–º–≤–æ–ª–æ–≤)  
meta_description = self._generate_meta_description(excerpt, focus_keyword)
```

### 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ wordpress_articles
```sql
INSERT INTO wordpress_articles (
    article_id, title, content, excerpt, slug,
    categories, tags, focus_keyword,
    _yoast_wpseo_title, _yoast_wpseo_metadesc,
    featured_image_index, translation_status,
    source_language, target_language, llm_model
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'translated', 'en', 'ru', 'deepseek-chat')
```

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ WordPress
- –ù–æ–≤–æ—Å—Ç–∏ (–≥–ª–∞–≤–Ω–∞—è)
  - LLM –∏ —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
  - –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ  
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—á–∏
  - –†–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
  - –ò –¥—Ä—É–≥–∏–µ...

## –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞
```bash
python core/main.py --wordpress-prepare --limit 10
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ featured image (–ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ featured image

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –¥–æ 10 —Å—Ç–∞—Ç–µ–π –∑–∞ —Ä–∞–∑
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ø—Ä–æ–ø—É—Å–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–≤–æ–¥–∞
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞

## –ú–µ—Ç—Ä–∏–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å—Ç–∞—Ç–µ–π
- –£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ
- –û—à–∏–±–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏